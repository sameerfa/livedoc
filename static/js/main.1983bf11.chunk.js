(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,n,t){},110:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t.n(c),i=t(23),a=t.n(i),r=t(25),s=t(58),l=t.n(s),u=(t(74),t(59)),d=t(4),f=t(2),j=[[{title:"LiveDoc"}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{list:"ordered"},{list:"bullet"}],["bold","italic","underline"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],[{align:[]}],["link","image","blockquote","code-block"],["clean"]];function b(){var e=Object(d.g)().id,n=Object(c.useState)(),t=Object(r.a)(n,2),o=t[0],i=t[1],a=Object(c.useState)(),s=Object(r.a)(a,2),b=s[0],h=s[1];Object(c.useEffect)((function(){var e=Object(u.io)("https://livedoc-socket.herokuapp.com");return i(e),function(){e.disconnect()}}),[]),Object(c.useEffect)((function(){null!=o&&null!=b&&(o.once("load-document",(function(e){b.setContents(e),b.enable()})),o.emit("get-document",e))}),[o,b,e]),Object(c.useEffect)((function(){if(null!=o&&null!=b){var e=setInterval((function(){o.emit("save-document",b.getContents())}),2e3);return function(){clearInterval(e)}}}),[o,b]),Object(c.useEffect)((function(){if(null!=o&&null!=b){var e=function(e){b.updateContents(e)};return o.on("receive-changes",e),function(){o.off("receive-changes",e)}}}),[o,b]),Object(c.useEffect)((function(){if(null!=o&&null!=b){var e=function(e,n,t){"user"===t&&o.emit("send-changes",e)};return b.on("text-change",e),function(){b.off("text-change",e)}}}),[o,b]);var v=Object(c.useCallback)((function(e){if(null!=e){e.innerHTML="";var n=document.createElement("div");e.append(n);var t=new l.a(n,{theme:"snow",modules:{toolbar:j}});t.disable(),t.setText("Loading..."),h(t)}}),[]);return Object(f.jsx)("div",{className:"container",ref:v})}var h=t(39),v=t(132),O=t(131),g=t(128),w=t(129),p=t(130);function m(){var e=Object(c.useState)(!0),n=Object(r.a)(e,2),t=n[0],o=n[1],i=Object(c.useState)(!1),a=Object(r.a)(i,2),s=a[0],l=a[1];return Object(f.jsxs)("div",{className:"footer",children:[Object(f.jsx)("h1",{children:"LiveDoc"}),Object(f.jsx)("a",{href:"https://github.com/sameerfa/livedoc/tree/master",children:Object(f.jsx)(O.a,{children:Object(f.jsx)(g.a,{})})}),Object(f.jsx)(O.a,{onClick:function(){window.print()},children:Object(f.jsx)(w.a,{})}),Object(f.jsx)(O.a,{onClick:function(){return o(!0)},children:Object(f.jsx)(p.a,{})}),t?Object(f.jsxs)("div",{className:"modal",children:[Object(f.jsx)("h2",{children:"Howdy, partner!"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"You can share this document with your friends to collaborate live."}),Object(f.jsx)("li",{children:"Data will be saved for a week. You can access it using the same link."}),Object(f.jsx)("li",{children:"You can download/ print file as PDF too."})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)(O.a,{className:"button",onClick:function(){navigator.clipboard.writeText(window.location.href),l(!0)},children:s?"Copied!":"Copy Link"}),Object(f.jsx)(O.a,{className:"button",onClick:function(){o(!1),l(!1)},children:"Okay, Cool!"})]})]}):null]})}var x=function(){return Object(f.jsxs)(h.a,{basename:"/",children:[Object(f.jsxs)(d.d,{children:[Object(f.jsx)(d.b,{path:"/",exact:!0,children:Object(f.jsx)(d.a,{to:"/documents/".concat(Object(v.a)())})}),Object(f.jsx)(d.b,{path:"/documents/:id",children:Object(f.jsx)(b,{})})]}),Object(f.jsx)(m,{})]})},k=(t(109),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function C(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}a.a.render(Object(f.jsx)(o.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/livedoc",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/livedoc","/worker.js");k?(!function(e,n){fetch(e).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):C(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):C(n,e)}))}}()}},[[110,1,2]]]);
//# sourceMappingURL=main.1983bf11.chunk.js.map